<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NN-Model Visualizer</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="gradient-bg">
        <div class="gradient-orb orb-1"></div>
        <div class="gradient-orb orb-2"></div>
        <div class="gradient-orb orb-3"></div>
    </div>

    <div class="app-container">
        <header class="header glass-panel">
            <div class="logo">
                <div class="logo-icon">
                    <svg viewBox="0 0 40 40" fill="none">
                        <circle cx="10" cy="10" r="4" fill="currentColor" opacity="0.6"/>
                        <circle cx="10" cy="30" r="4" fill="currentColor" opacity="0.6"/>
                        <circle cx="30" cy="20" r="5" fill="currentColor"/>
                        <line x1="14" y1="10" x2="25" y2="18" stroke="currentColor" stroke-width="1.5" opacity="0.4"/>
                        <line x1="14" y1="30" x2="25" y2="22" stroke="currentColor" stroke-width="1.5" opacity="0.4"/>
                    </svg>
                </div>
                <h1>NN-Model Visualizer</h1>
            </div>
            <div class="header-info">
                <span class="badge">Interactive Learning</span>
                <button class="help-btn" id="help-btn">
                    <svg viewBox="0 0 24 24" width="18" height="18" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="12" r="10"/>
                        <path d="M9.09 9a3 3 0 015.83 1c0 2-3 3-3 3"/>
                        <line x1="12" y1="17" x2="12.01" y2="17"/>
                    </svg>
                    How to Use
                </button>
            </div>
        </header>

        <!-- Help Modal -->
        <div class="help-modal-overlay" id="help-modal">
            <div class="help-modal glass-panel">
                <button class="help-modal-close" id="help-close">
                    <svg viewBox="0 0 24 24" width="24" height="24" fill="none" stroke="currentColor" stroke-width="2">
                        <line x1="18" y1="6" x2="6" y2="18"/>
                        <line x1="6" y1="6" x2="18" y2="18"/>
                    </svg>
                </button>
                
                <h2 class="help-title">
                    <svg viewBox="0 0 40 40" fill="none" width="32" height="32">
                        <circle cx="10" cy="10" r="4" fill="currentColor" opacity="0.6"/>
                        <circle cx="10" cy="30" r="4" fill="currentColor" opacity="0.6"/>
                        <circle cx="30" cy="20" r="5" fill="currentColor"/>
                        <line x1="14" y1="10" x2="25" y2="18" stroke="currentColor" stroke-width="1.5" opacity="0.4"/>
                        <line x1="14" y1="30" x2="25" y2="22" stroke="currentColor" stroke-width="1.5" opacity="0.4"/>
                    </svg>
                    How to Use NN-Model Visualizer
                </h2>
                
                <div class="help-content">
                    <div class="help-section">
                        <h3>üéØ What is this?</h3>
                        <p>An interactive visualization tool to understand how neural networks learn through <strong>forward propagation</strong> and <strong>backpropagation</strong>.</p>
                    </div>
                    
                    <div class="help-section">
                        <h3>‚öôÔ∏è Configure Your Network</h3>
                        <ul>
                            <li><strong>Input Neurons:</strong> Number of inputs (features) to the network</li>
                            <li><strong>Hidden Layers:</strong> Number of layers between input and output</li>
                            <li><strong>Neurons per Layer:</strong> How many neurons in each hidden layer</li>
                            <li><strong>Activation Function:</strong> Sigmoid, ReLU, or Tanh</li>
                            <li><strong>Learning Rate:</strong> How fast the network learns (higher = faster but less stable)</li>
                        </ul>
                    </div>
                    
                    <div class="help-section">
                        <h3>‚ñ∂Ô∏è Playback Controls</h3>
                        <ul>
                            <li><strong>Play/Pause:</strong> Automatically step through forward & backward pass</li>
                            <li><strong>Step Forward/Back:</strong> Manually control each computation step</li>
                            <li><strong>Reset:</strong> Return to initial state</li>
                            <li><strong>Speed:</strong> Adjust animation speed</li>
                        </ul>
                    </div>
                    
                    <div class="help-section">
                        <h3>üîç Understanding the Visualization</h3>
                        <ul>
                            <li><strong>Cyan lines:</strong> Positive weights</li>
                            <li><strong>Magenta lines:</strong> Negative weights</li>
                            <li><strong>Line thickness:</strong> Weight magnitude</li>
                            <li><strong>Hover on edges:</strong> See weight values and changes</li>
                            <li><strong>Click weight cells:</strong> Highlight corresponding edge</li>
                        </ul>
                    </div>
                    
                    <div class="help-section">
                        <h3>üìä The Learning Process</h3>
                        <ol>
                            <li><strong>Forward Pass:</strong> Input flows through network, computing activations</li>
                            <li><strong>Loss Calculation:</strong> Compare output to target</li>
                            <li><strong>Backward Pass:</strong> Calculate gradients for each weight</li>
                            <li><strong>Weight Update:</strong> Adjust weights to reduce error</li>
                        </ol>
                    </div>
                    
                    <div class="help-section">
                        <h3>üîÑ Epoch Training</h3>
                        <p>An <strong>epoch</strong> is one complete pass through the training data. In this visualizer:</p>
                        <ul>
                            <li><strong>Samples per Epoch:</strong> Number of training examples in each epoch (1-10)</li>
                            <li><strong>Number of Epochs:</strong> How many times to iterate through all samples (1-10)</li>
                            <li><strong>Run Training:</strong> Automatically train through all epochs and samples</li>
                            <li>Watch the <strong>average loss decrease</strong> as the network learns!</li>
                        </ul>
                        <p style="margin-top: 8px; color: var(--accent-cyan);">üí° Each sample is a random input-target pair. The network adjusts weights to minimize the prediction error (loss).</p>
                    </div>
                    
                    <div class="help-section">
                        <h3>üí° Tips</h3>
                        <ul>
                            <li>Watch the equations appear during forward pass to see calculations</li>
                            <li>Click "New Sample" to try different inputs</li>
                            <li>Use "Run Training" to watch the network learn over multiple epochs</li>
                            <li>Observe how the average loss decreases with more training</li>
                            <li>Check the Weights/Gradients/Activations tabs for detailed values</li>
                        </ul>
                    </div>
                </div>
                
                <div class="help-footer">
                    <button class="btn btn-primary" id="help-got-it">Got it!</button>
                </div>
            </div>
        </div>

        <main class="main-content">
            <!-- Controls Panel -->
            <aside class="controls-panel glass-panel">
                <div class="panel-header">
                    <h2>Network Configuration</h2>
                </div>

                <div class="control-section">
                    <label class="control-label">
                        <span>Input Neurons</span>
                        <span class="value-display" id="input-count-display">3</span>
                    </label>
                    <input type="range" id="input-count" min="1" max="6" value="3" class="slider">
                </div>

                <div class="control-section">
                    <label class="control-label">
                        <span>Hidden Layers</span>
                        <span class="value-display" id="hidden-layers-display">2</span>
                    </label>
                    <input type="range" id="hidden-layers" min="1" max="4" value="2" class="slider">
                </div>

                <div class="control-section">
                    <label class="control-label">
                        <span>Neurons per Layer</span>
                        <span class="value-display" id="neurons-per-layer-display">4</span>
                    </label>
                    <input type="range" id="neurons-per-layer" min="2" max="8" value="4" class="slider">
                </div>

                <div class="control-section">
                    <label class="control-label">
                        <span>Activation Function</span>
                    </label>
                    <div class="select-wrapper">
                        <select id="activation-function" class="select-input">
                            <option value="sigmoid">Sigmoid œÉ(x)</option>
                            <option value="relu">ReLU max(0,x)</option>
                            <option value="tanh">Tanh</option>
                        </select>
                    </div>
                </div>

                <div class="control-section">
                    <label class="control-label">
                        <span>Learning Rate</span>
                        <span class="value-display" id="learning-rate-display">0.5</span>
                    </label>
                    <input type="range" id="learning-rate" min="0.01" max="1" step="0.01" value="0.5" class="slider">
                </div>

                <div class="divider"></div>

                <div class="panel-header">
                    <h2>Epoch Training</h2>
                </div>

                <div class="control-section">
                    <label class="control-label">
                        <span>Samples per Epoch</span>
                        <span class="value-display" id="samples-per-epoch-display">5</span>
                    </label>
                    <input type="range" id="samples-per-epoch" min="1" max="10" value="5" class="slider">
                </div>

                <div class="control-section">
                    <label class="control-label">
                        <span>Number of Epochs</span>
                        <span class="value-display" id="num-epochs-display">5</span>
                    </label>
                    <input type="range" id="num-epochs" min="1" max="10" value="5" class="slider">
                </div>

                <div class="epoch-progress" id="epoch-progress">
                    <div class="epoch-stats">
                        <div class="epoch-stat">
                            <span class="stat-label">Epoch</span>
                            <span class="stat-value" id="current-epoch">0 / 5</span>
                        </div>
                        <div class="epoch-stat">
                            <span class="stat-label">Sample</span>
                            <span class="stat-value" id="current-sample">0 / 5</span>
                        </div>
                        <div class="epoch-stat">
                            <span class="stat-label">Avg Loss</span>
                            <span class="stat-value" id="avg-loss">--</span>
                        </div>
                    </div>
                    <div class="epoch-bar-container">
                        <div class="epoch-bar" id="epoch-bar"></div>
                    </div>
                </div>

                <div class="control-section">
                    <button id="run-epoch" class="btn btn-accent">
                        <svg viewBox="0 0 24 24" width="18" height="18" fill="none" stroke="currentColor" stroke-width="2">
                            <polygon points="5 3 19 12 5 21 5 3"/>
                        </svg>
                        Run Training
                    </button>
                    <button id="stop-epoch" class="btn btn-secondary" style="display: none;">
                        <svg viewBox="0 0 24 24" width="18" height="18" fill="currentColor">
                            <rect x="6" y="6" width="12" height="12" rx="2"/>
                        </svg>
                        Stop
                    </button>
                </div>

                <div class="divider"></div>

                <div class="control-section">
                    <button id="build-network" class="btn btn-primary">
                        <svg viewBox="0 0 24 24" width="18" height="18" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M12 5v14M5 12h14"/>
                        </svg>
                        Build Network
                    </button>
                    <button id="randomize-weights" class="btn btn-secondary">
                        <svg viewBox="0 0 24 24" width="18" height="18" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"/>
                        </svg>
                        Randomize Weights
                    </button>
                </div>

                <div class="divider"></div>

                <div class="panel-header">
                    <h2>Training Data</h2>
                </div>

                <div class="data-display" id="data-display">
                    <div class="data-row">
                        <span class="data-label">Input:</span>
                        <span class="data-value" id="current-input">[0.5, 0.3, 0.8]</span>
                    </div>
                    <div class="data-row">
                        <span class="data-label">Target:</span>
                        <span class="data-value" id="current-target">1</span>
                    </div>
                    <div class="data-row">
                        <span class="data-label">Output:</span>
                        <span class="data-value" id="current-output">--</span>
                    </div>
                    <div class="data-row">
                        <span class="data-label">Loss:</span>
                        <span class="data-value" id="current-loss">--</span>
                    </div>
                </div>

                <button id="new-sample" class="btn btn-secondary">
                    <svg viewBox="0 0 24 24" width="18" height="18" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M19 21H5a2 2 0 01-2-2V5a2 2 0 012-2h11l5 5v11a2 2 0 01-2 2z"/>
                        <polyline points="17 21 17 13 7 13 7 21"/>
                        <polyline points="7 3 7 8 15 8"/>
                    </svg>
                    New Sample
                </button>
            </aside>

            <!-- Visualization Area -->
            <section class="visualization-area">
                <div class="viz-header glass-panel">
                    <div class="phase-indicator">
                        <div class="phase-dot" id="phase-forward"></div>
                        <span id="current-phase">Ready</span>
                    </div>
                    <div class="playback-controls">
                        <button id="step-back" class="control-btn" title="Step Back">
                            <svg viewBox="0 0 24 24" width="20" height="20" fill="currentColor">
                                <path d="M6 6h2v12H6zm3.5 6l8.5 6V6z"/>
                            </svg>
                        </button>
                        <button id="play-pause" class="control-btn play-btn" title="Play/Pause">
                            <svg id="play-icon" viewBox="0 0 24 24" width="24" height="24" fill="currentColor">
                                <path d="M8 5v14l11-7z"/>
                            </svg>
                            <svg id="pause-icon" viewBox="0 0 24 24" width="24" height="24" fill="currentColor" style="display:none;">
                                <path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"/>
                            </svg>
                        </button>
                        <button id="step-forward" class="control-btn" title="Step Forward">
                            <svg viewBox="0 0 24 24" width="20" height="20" fill="currentColor">
                                <path d="M6 18l8.5-6L6 6v12zM16 6v12h2V6h-2z"/>
                            </svg>
                        </button>
                        <button id="reset" class="control-btn" title="Reset">
                            <svg viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M3 12a9 9 0 019-9 9.75 9.75 0 016.74 2.74L21 8"/>
                                <path d="M21 3v5h-5"/>
                                <path d="M21 12a9 9 0 01-9 9 9.75 9.75 0 01-6.74-2.74L3 16"/>
                                <path d="M8 16H3v5"/>
                            </svg>
                        </button>
                    </div>
                    <div class="speed-control">
                        <label>Speed</label>
                        <input type="range" id="animation-speed" min="0.5" max="3" step="0.5" value="1" class="slider slider-small">
                        <span id="speed-display">1x</span>
                    </div>
                </div>

                <div class="network-canvas glass-panel" id="network-container">
                    <svg id="network-svg" width="100%" height="100%"></svg>
                </div>

                <!-- Info Panel -->
                <div class="info-panel glass-panel">
                    <div class="info-tabs">
                        <button class="info-tab active" data-tab="weights">Weights</button>
                        <button class="info-tab" data-tab="gradients">Gradients</button>
                        <button class="info-tab" data-tab="activations">Activations</button>
                    </div>
                    <div class="info-content" id="info-content">
                        <div class="info-placeholder">
                            Build a network to see details
                        </div>
                    </div>
                </div>
            </section>
        </main>

        <!-- Legend -->
        <div class="legend glass-panel">
            <div class="legend-item">
                <div class="legend-dot positive"></div>
                <span>Positive value/weight</span>
            </div>
            <div class="legend-item">
                <div class="legend-dot negative"></div>
                <span>Negative value/weight</span>
            </div>
            <div class="legend-item">
                <div class="legend-line forward"></div>
                <span>Forward pass</span>
            </div>
            <div class="legend-item">
                <div class="legend-line backward"></div>
                <span>Backward pass</span>
            </div>
        </div>
    </div>

    <script src="neural-network.js"></script>
    <script src="visualizer.js"></script>
    <script src="app.js"></script>
</body>
</html>
